<span class="resultados" *ngIf="!isLoading">
  <div class="content" id="contentToConvert">
    <div class="titulo">
      <h2 id="titulo">resultados</h2>
    </div>
    <div class="info-container" id="info-container">
      <div class="action-buttons">
        <div class="editar-component">
          <button id="boton-editar" (click)="enabledDrawing()">
            Editar área
            <span class="material-icons">edit</span>
          </button>
        </div>

       <!-- <div class="valor-mostrado">
          <p id="valor">*Todos los valores son estimados.</p>
        </div>-->

        <div class="descargar-enviar-component">
          <button id="downloadButton" (click)="downloadPDF()">
            <mat-icon class="icono-secundario">download</mat-icon>
          </button>
          <br />
          <button id="emailButton" (click)="openModal()">
            <mat-icon class="icono-secundario">email</mat-icon>
          </button>
        </div>
      </div>

     <!-- <div class="visible-container">
        <div class="valor-mostrado-bis">
          <p id="valor-bis">*Todos los valores son estimados.</p>
        </div>
      </div>-->

      <div class="informacion">
        <div class="container-ingreso-datos">
          <app-paneles
            [dimensionPanel]="dimensionPanel"
            [panelCapacityW]="panelCapacityW"
          ></app-paneles>
        </div>
        <!--container-ingreso-datos-->

        <div class="container">
          <div class="item"><app-ahorros></app-ahorros></div>

          <div class="item"><app-costo [costoInstalacion]="costoInstalacion"></app-costo></div>

          <div class="item">
            <app-plazo
              [yearlyEnergyAcKwhInitial]="yearlyEnergyAcKwh"
            ></app-plazo>
          </div>

          <div class="item">
            <app-potencia></app-potencia>
          </div>

          <div class="item">
            <app-energia [yearlyEnergyAcKwh]="yearlyEnergyAcKwh"></app-energia>
          </div>

          <div class="item"><app-superficie></app-superficie></div>

          <div class="item">
            <app-tarifa-intercambio></app-tarifa-intercambio>
          </div>

          <div class="item">
            <app-emisiones
              [carbonOffsetFactorTnPerMWh]="carbonOffsetFactorTnPerMWh"
            ></app-emisiones>
          </div>
          
        </div>
        <!--container-->

        <div class="container-graficos" id="graficos">
          <div class="item-grafico">
            <app-graficos
              [periodoVeinteanalEmisionesGEIEvitadas]="
                getEmisionesGEIEvitadas()
              "
              [periodoVeinteanalFlujoEnergia]="getFlujoEnergia()"
              [periodoVeinteanalFlujoIngresosMonetarios]="
                getFlujoIngresosMonetarios()
              "
              [periodoVeinteanalGeneracionFotovoltaica]="
                getGeneracionFotovoltaica()
              "
              [consumoTotalAnual]="consumoTotalAnual"
              [yearlyEnergyInitial]="yearlyEnergyInitial"
            >
            </app-graficos>
          </div>
        </div>
        <!--container-graficos-->

        <div class="container-hipotesis">
          <h3 id="titulo-hipotesis">Hipótesis adoptadas</h3>
          <p id="texto-hipotesis">
            Los resultados de la evaluación a partir de la aplicación “Generación Solar Distribuida San Juan”, deben considerarse aproximados y
            no representan opinión ni dictamen técnico del E.P.R.E. Se
            reproducen a modo de referencia para el desarrollo de estudios
            técnicos fundamentados y particularizados en cada Suministro,
            habiéndose adoptado las siguientes hipótesis:
          </p>
          <p id="hipotesis"> ⦁ Potencia de cada panel =  400 W.</p>
          <p id="hipotesis"> ⦁ Eficiancia de la instalación = 80%</p>
          <p id="hipotesis"> ⦁ Degradación anual de paneles = 0,40%</p>
          <p id="hipotesis"> ⦁ Proporción de energía autoconsumida =</p>
          <p id="hipotesis"> ⦁ Proporción de energía inyectada =</p>
          <p id="hipotesis"> ⦁ Equipo de medición  = 500 USD</p>
          <p id="hipotesis"> ⦁ Mantenimiento inicial = 15 USD/año</p>
          <p id="hipotesis"> ⦁ Tasa de inflación (USD) = 5%</p>
          <p id="hipotesis"> ⦁ Tasa de descuento de flujo de fondos (USD) =</p>
          <p id="hipotesis"> ⦁ Tarifas vigentes a la fecha de la realización del presente cálculo.</p>
          <p id="hipotesis"> ⦁ Fecha de su consulta: {{ timestamp }}</p>
        </div>
        <!--hipotesis-container-->

        <div class="button-container">
          <div class="boton">
            <button id="boton-volver" (click)="goBack()">
              <span class="material-icons">chevron_left</span> Volver
            </button>
            <br />
            <button id="boton-siguiente" (click)="mostrarAdvertencia()">
              Nuevo cálculo
              <span class="material-icons">chevron_right</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" [ngClass]="{ mostrar: mostrarModal }">
    <div class="modal-contenido">
      <p>
        ¿Estás seguro de que deseas salir? Cualquier información no guardada se
        perderá.
      </p>
      <div class="botones-modal">
        <button id="boton-volver" (click)="cancelarSalir()">Cancelar</button>
        <button id="boton-siguiente" (click)="confirmarSalir()">Aceptar</button>
      </div>
    </div>
  </div>
</span>

<div class="modal-backdrop" *ngIf="isModalOpen">
  <div class="modal-container">
    <h2>Enviar Email</h2>
    <p>Por favor ingrese su correo electrónico.</p>
    <div class="input-container">
      <input
        id="email"
        [(ngModel)]="email"
        type="email"
        placeholder="Ingrese su correo electrónico"
      />
    </div>
    <div class="modal-actions">
      <button id="boton-volver" (click)="closeModal()">Cancelar</button>
      <button id="boton-siguiente" (click)="sendEmail()">Enviar</button>
    </div>
  </div>
</div>
